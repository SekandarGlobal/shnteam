<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Our App</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
        import { getDatabase, ref, runTransaction, onValue } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAU7HJvRvnw_93uplcv4IJg4-4tz3T7SAs",
            authDomain: "pubg-hack-d2914.firebaseapp.com",
            projectId: "pubg-hack-d2914",
            storageBucket: "pubg-hack-d2914.firebasestorage.app",
            messagingSenderId: "788182655586",
            appId: "1:788182655586:web:fd81599d0f1a8790e9273b",
            measurementId: "G-5YEPVCX9PG"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        window.firebaseApp = { db, ref, runTransaction, onValue };
    </script>
</head>
<body>

    <section class="hero">
        <div class="container">
            <h1><span>Download the Future.</span></h1>
            <p>Get the latest version of our app. Fast, simple, and powerful.</p>
            
            <div class="download-container">
                <div class="download-stats">
                    <span class="download-count" id="downloadCount">0</span>
                    <span class="download-label">downloads</span>
                </div>

                <!-- Modern Download Button -->
                <a href="/download/app-release.apk" class="download-link" id="downloadBtn" download>
                    <span class="download-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        <span>Download APK</span>
                    </span>
                </a>

                <div class="safety-notes">
                    <p class="note-text">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        Our APK is safe. You may need to <strong>"Allow from this source"</strong> in your Android settings to install.
                    </p>
                    <p class="note-beta">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                        </svg>
                        <strong>Beta Version</strong> â€” This app is still in development.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const downloadBtn = document.getElementById('downloadBtn');
            const countDisplay = document.getElementById('downloadCount');
            
            // Listen for download count from Firebase
            if (window.firebaseApp) {
                const { db, ref, onValue } = window.firebaseApp;
                onValue(ref(db, 'downloads'), (snapshot) => {
                    countDisplay.textContent = (snapshot.val() || 0).toLocaleString();
                });
            }

            // Track download on click
            downloadBtn.addEventListener('click', () => {
                if (window.firebaseApp) {
                    const { db, ref, runTransaction } = window.firebaseApp;
                    runTransaction(ref(db, 'downloads'), (count) => (count || 0) + 1);
                }
            });
        });
    </script>

</body>
</html>
